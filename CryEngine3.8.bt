//--------------------------------------
//--- 010 Editor v6.0.3 Binary Template
//
// File:  Cryengine 3.8, Lumberyard
// Author:  Geoff Gerber
// Revision:  1.0
// Purpose:  3D animation
//--------------------------------------

#include "Cryengine3.8-Enums.bt"
#include "CryEngine3.8-Structs.bt"
#include "Cryengine-Helpers.bt"

local uint pos;
local uint i;

HEADER headerInfo <bgcolor=cLtBlue>;

pos = FTell(); // save read position
FSeek(headerInfo.fileOffset);

CHUNKTABLE chunkTable(headerInfo.version, headerInfo.numChunks) <bgcolor=cDkBlue>;

FSeek(pos);

for (i = 0; i < headerInfo.numChunks; i++) {
    FSeek(chunkTable.tableEntry[i].offset);
    
    switch (chunkTable.tableEntry[i].chunkType) {
        case Node: {
            NODECHUNK nodeChunk(false) <comment=GetNodeName>;
            break;
        }
        case Mesh: {
            MESHCHUNK meshChunk(headerInfo.version);
            break;
        }
        case Helper: {
            HELPER helper;
            break;
        }
        case CompiledBones: {
            local int numberOfBones;
            numberOfBones = (chunkTable[i].size - 32)/584;
            COMPILEDBONES bones(numberOfBones) <bgcolor=cDkRed>;
            break;
        }
        case DataStream: {
            DATASTREAMCHUNK datastream <comment=GetDatastreamType>;
            break;
        }
        case MeshSubsets: {
            MESHSUBSETS meshSubsets(headerInfo.version) <bgcolor=cLtBlue>;
            break;
        }
        case CompiledPhysicalBones: {
            COMPILEDPHYSICALBONESCHUNK compiledPhysicalBones(numberOfBones) <bgcolor=cLtGreen>;
            break;
        }
        case MtlName: {
            MTLNAMECHUNK mtlName <bgcolor=cDkGreen>;
        }
        default: {
            break;
        }
    }
};    
